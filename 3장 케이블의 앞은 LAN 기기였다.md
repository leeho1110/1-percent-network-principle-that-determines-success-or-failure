# 3장: 케이블의 앞은 LAN 기기였다

### 1. 케이블과 리피터, 허브 속을 신호가 흘러간다

- 앞장에서 이더넷 헤더에 필요한 여러 요소들까지 모두 채워넣었습니다. 이번 장에선 LAN 어댑터를 통해 겹겹이 싸여진 패킷이 어떻게 송신되는지 확인합니다.
- LAN 어댑터의 PHY(MAU) 회로에서는 전기 신호로 형태가 변경됩니다. 이 때 변경된 전기 신호는 **RJ-45 커넥터를 통해 트위스트 페어 케이블**에 들어갑니다.
    - 전기 신호는 케이블 내에서 허브에 도착할 때까지 신호가 조금씩 변형되고 약해집니다. 처음엔 직각의 산 모양을 잘 유지하지만, 점점 잡음이 섞이며 파형이 왜곡되고 각이 뭉개지죠.
        - 이는 주파수와 에너지 비율에 따른 전기 신호의 성질과 관련이 있으며 이 때문에 수신 측에선 0,1을 잘못 판독하게 될 가능성이 존재합니다. 이것이 바로 통신 오류의 원인입니다.
    - 일반 단선 케이블이 아닌 트위스트 페어 케이블을 사용하는 이유가 바로 이것입니다. 신호선을 꼬게 되면 앞서 말한 통신 오류의 원인이 되는 잡음을 방지할 수 있습니다.
        - ‘꼼’이 잡음을 막을 수 있는 이유는 잡음의 발생 원리로부터 기원합니다. 이는 생략합니다.
- 리피터 허브에 신호가 도착하면 LAN 전체에 신호가 뿌려지게 됩니다.
    - 리피터 허브는 MAC 주소에 해당하는 기기에게만 패킷을 보내는 스위칭 허브와는 다릅니다.
    - **전체 네트워크에 패킷을 뿌리고 수신처에 해당하는 기기만 패킷을 수신하는 이더넷의 기본 원리**를 실현합니다.
        - 신호는 커넥터 내부의 회로를 통해 해석되는데 이는 생략합니다.
        - 신호를 수신한 기기는 자신이 수신처에 해당하는 경우만 수신하고, 아닌 경우는 무시합니다.

---

### 2. 스위칭 허브의 패킷 중계 동작

- 스위칭 허브는 라우터와 마찬가지로 네비게이션을 봅니다. 이 네비게이션의 이름은 **주소 테이블**입니다.
    - MAC 주소와 포트, 제어 정보가 등록되어있어 패킷을 수신했을 때 적혀있는 주소를 확인해 특정 포트로 패킷을 송신합니다.
    - 아까 리피터 허브와 다른 점은 네비게이션입니다. 리피터 허브는 자신과 연결된 네트워크에 모두 패킷을 송신했지만, 스위칭 허브는 자신이 판독한 포트(기기)에만 포트를 송신합니다.
    - 스위칭 허브는 LAN 어댑터와는 달리 MAC 주소가 할당되어 있지 않습니다.
        - 다만 모든 패킷을 수신해 버퍼 메모리에 저장합니다.
        - 패킷을 저장하는 이유는 주소 테이블과 대조해 다음 수신처 MAC 주소를 알아내기 위함입니다.
        - 패킷을 송신하는 경우 스위치 회로를 경유하게 되는데 이 원리는 생략합니다.
- 스위칭 허브는 패킷 중계 시 MAC 주소표의 내용도 갱신합니다.
    - 내용을 갱신하는 행위를 **갱신 동작**이라고 부르는데, 이는 패킷 수신 시 진행됩니다.
        - 송신처 MAC 주소와 수신한 입력 포트를 매핑해 MAC 주소표에 등록하는 것을 의미합니다.
        - 등록된 정보는 일정 시간(일반적으로 몇 분)이 경과하면 삭제됩니다.
- 전이중, 반이중 모드에 대한 설명은 생략합니다.

---