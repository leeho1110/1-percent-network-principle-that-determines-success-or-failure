# 5장: 서버측의 LAN에는 무엇이 있는가?

### 1. 웹 서버의 설치 장소

- 우리가 요청을 보내는 서버는 과연 어떻게 설치되어 있을까요?
    - 먼저 간단하게는 라우터와 사내 LAN이 프로바이더의 네트워크로부터 액세스 회선을 통해 직접 연결될 수 있습니다.
        - 하지만 IP 주소 부족과 보안 문제로 인해 현재는 위 방법은 사용되지 않는 경우가 많습니다.
    - 따라서 최근엔 액세스 회선과 사내 LAN 사이에 방화벽을 두는 경우가 일반적입니다.
        - 방화벽은 패킷들을 검증하여 통과시키거나 차단하는 역할을 수행합니다.

---

### 2. 방화벽의 원리와 동작

- 방화벽은 기본적으로 특정 서버와 서버 내 특정 애플리케이션에 액세스하는 패킷은 통과시키고 나머지는 차단하는 방법을 사용합니다.
    - 네트워크 상에선 다양한 패킷이 흐르기 때문에 이를 구별해내는 것은 쉬운 일이 아닙니다. 이런 방법 중 **패킷 필터링형**이 가장 일반적입니다.
- 패킷 필터링에서는 아래와 같은 정보들을 통해 부정 패킷을 판단합니다.
    - 가장 먼저 수신처와 송신처 IP 주소를 통해 시작점과 끝점을 판단합니다.
    - 그 다음은 특정 애플리케이션에 대한 접근을 위해 포트 번호를 추가로 적용합니다.
    - TCP 커넥션을 위한 3way 핸드쉐이킹에서 매겨지는 컨트롤 비트도 활용합니다.
- 방화벽은 패킷을 판정하며 버린 패킷에 대한 기록을 남깁니다.
    - 버린 패킷을 통해 부정 침입의 흔적을 확인해 대책을 마련하기 위함입니다.
- 패킷 필터링만으론 패킷 내의 위험한 데이터 문제는 검증해내지 못합니다.

---