# 4장: 액세스 회선을 통해 인터넷의 내부로!

### 서문

이번 장에선 가정 혹은 회사의 LAN이 어떻게 저 멀리에 있는 미국까지 닿을 수 있는지를 설명합니다. 이 중 핵심은 단순히 이더넷으로 연결하는 것을 넘어선 프로바이더와의 연결을 위한 **액세스 회선**이라는 통신 회선입니다. 이번 장에서는 ADSL(Asymmetric Digital Subscriber Line), 광섬유를 이용한 FTTH(Fiber To The Home) 등을 가볍게 알아봅니다.

사실 애플리케이션을 개발하는 일반적인 관점에서는 네트워크 쪽으로 많이 치우친 경향이 있습니다. 하지만 소프트웨어 엔지니어링에서 네트워크의 거시적인 관점을 익히는 일은 빠트릴 수 없는 일이기에 가볍게 살펴보고 넘어갑니다.

---

### 1. ADSL 기술을 이용한 액세스 회선의 구조와 동작

- 인터넷은 앞서 배운 내용과 크게 다르지 않습니다. 작은 기술들을 훨씬 더 큰 범위에서 사용하고 있을 뿐입니다. 다만 LAN과 다른 점은 **중계 장치 간의 거리**와 **패킷의 중계 대상의 제어**입니다.
    - 훨씬 멀고, 훨씬 방대합니다. 따라서 이더넷보단 훨씬 긴 거리를 커버할 수 있으며, 경로표의 중계 대상의 등록과 수정이 반드시 자동화되어야 합니다.
- 액세스 회선은 LAN을 서로 연결하는 통신 회선을 의미합니다. 이 중 대표적인 ADSL을 알아봅시다.
    - 먼저 사용자의 라우터에서 송신된 패킷은 ADSL 모뎀 혹은 전화의 케이블을 통해 최초 전화국에 도착한 뒤, ADSL 사업자의 네트워크를 경유해 ISP(Internet Service Provider, 이하 프로바이더)에 도착합니다.
        - 프로바이더까지 패킷은 다양한 형태로 모습을 바꿉니다.
        - 인터넷을 접속하기 위한 라우터는 기존 이더넷 헤더의 MAC 헤더 외에 **PPPoE(Point-to-Point Protocol over Ethernet), PPP(Point-to-Point Protocol)**라는 헤더를 더 붙힙니다.
    - ADSL 모뎀에서는 ISP에게 보내기 전 패킷을 작게 분할하여 **셀**에 저장하여 송신합니다.
        - 이 후 이를 신호로 변환하는데 여기엔 몇 가지 변조 기술을 사용합니다. 하지만 이 내용은 생략하며 **모뎀에서 셀이 전기 신호로 변환된다고만** 생각합시다.
- 머리가 아프니 잠시 정리해봅시다. 인터넷 접속용 라우터에서 전송된 패킷은 MAC 헤더 외에도 2가지 헤더를 추가로 붙히게 되며, ADSL 모뎀에 도착하여 전기 신호로 변환됩니다. 그 다음 **스플리터**라는 장치에 들어가 전화 회선에 전화 음성 신호와 섞여 같이 흘러갑니다.
    - 스플리터의 역할은 셀을 보낼 때가 아닌 받을 때입니다. 이름처럼 전화와 ADSL의 신호를 분리하는 역할을 수행합니다.
- 그 다음은 전화 케이블을 꽂은 모듈형 커넥터가 존재합니다. 사실 **전화 배선을 통해 신호가 흘러간다고만** 알아도 될 듯 합니다.
    - 중요한 부분은 ADSL, 스플리터, 전화 케이블을 꽂은 커넥터와 케이블을 지나 전화국에 도착한 신호가 어디에 도착하느냐 입니다. 도착한 곳은 **DSLAM(DSL Access Multiplexer)**입니다.
        - 다수의 ADSL 모뎀을 하나의 케이스에 넣은 기기라고 합니다.
    - 이 때 전화국 DSLAM의 ADSL 모뎀은 사용자 모뎀의 송신 동작을 통해 변환했던 **전기 신호를 수신 동작을 통해 다시 디지털 데이터의 셀로 복원**합니다.
        - 이 때 사용자 측 모뎀과의 차이는 사용자는 패킷 형태로 라우터, PC와 커뮤니케이션하지만 DSLAM은 대부분 ATM 인터페이스를 통해 커뮤니케이션합니다.
- 디지털 데이터 형태로 DSLAM을 빠져나온 셀은 **BAS(Broadband Access Server)**라는 패킷 중계 장치에 도착합니다.
    - 여기서 셀을 맨 처음의 패킷 형태로 복원합니다. 이후 MAC, PPPoE 헤더를 버리고, PPP 헤더 이후 부분을 추출합니다.
        - 둘을 버리는 이유는 BAS 인터페이스에 패킷을 넘기기 위해서 필요한 부분이기 때문입니다.
    - 이 후 터널링에 필요한 헤더를 붙혀 터널링 출구에 있는 터널링용 라우터에 도착해 다시 중계를 시작합니다.
- 처음부터 정리해보자면 패킷이 흘러가는 경로는 아래와 같습니다.
    - 사용자 LAN의 라우터 → ADSL 모뎀 혹은 전화 케이블 → 전화국 → ISP → 스플리터 → 모듈형 커넥터 → 전화 케이블 → DSLAM (ADSL 모뎀) → BAS → 터널링 출구에 존재하는 터널링용 라우터
    - 이 때 패킷은 각 장치들이 어떤 인터페이스를 가지고 있냐에 따라 셀이 되기도, 패킷이 되기도 합니다. 또한 패킷이 셀로 변환되고 전기 신호로도 바뀌며 다시 형태를 복원하기도 하죠.

---

### 2. 광섬유를 이용한 액세스 회원 (FTTH)

- 이제부터 패킷은 인터넷 내부로 들어갑니다. 앞 부분은 **어떻게 디지털 데이터가 전기 신호로 변환되고, 어떻게 다시 광신호로 변환되는지를 설명**합니다. 따라서 생략합니다.
- FTTH를 활용하는 것과 ADSL를 활용하는 액세스 회선의 차이는 **광섬유이냐 ADSL 모뎀이냐** 차이입니다.

---